<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Okinawa 2026 æ²–ç¹©åº¦å‡è¶£</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        body { 
            font-family: 'Noto Sans JP', sans-serif; 
            background-image: url('https://images.unsplash.com/photo-1544253049-3543666f286b?q=80&w=2000&auto=format&fit=crop'); 
            background-size: cover; background-position: center; background-attachment: fixed;
        }
        .main-overlay { background: rgba(255, 255, 255, 0.05); backdrop-filter: blur(8px); min-height: 100vh; }
        .glass-card { 
            background: rgba(255, 255, 255, 0.75); 
            backdrop-filter: blur(12px); 
            border: 1px solid rgba(255, 255, 255, 0.3); 
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
        }
        .sticky-header { position: sticky; top: 0; z-index: 40; background: rgba(255, 255, 255, 0.6); backdrop-filter: blur(20px); }
        .timeline-line { position: absolute; left: 20px; top: 0; bottom: 0; width: 2px; border-left: 2px dashed #0d9488; z-index: 0; opacity: 0.3; }
        .timeline-dot { position: absolute; left: 14px; width: 14px; height: 14px; background: #0d9488; border: 3px solid white; border-radius: 50%; z-index: 10; }
        input, textarea { background: transparent; border: none; outline: none; width: 100%; color: #1e293b; }
        input::placeholder, textarea::placeholder { color: #94a3b8; }
        .active-tab { background-color: #0d9488 !important; color: white !important; }
        .map-btn { background: #4285F4; color: white; border-radius: 12px; padding: 6px 12px; font-size: 11px; font-weight: 800; display: flex; align-items: center; gap: 4px; }
        /* éš±è—æ²è»¸ä½†ä¿æŒæ»¾å‹• */
        .no-scrollbar::-webkit-scrollbar { display: none; }
    </style>
</head>
<body class="text-slate-800">
    <div id="app" class="main-overlay pb-32">
        <header class="sticky-header shadow-sm">
            <div class="p-5 pb-2 flex justify-between items-center">
                <div>
                    <h1 class="text-2xl font-black text-teal-900">æ²–ç¹© 2026 ğŸŒ´</h1>
                    <span class="text-[10px] bg-white/80 px-2 py-0.5 rounded-full font-bold text-teal-700">1/4 - 1/8 VACATION</span>
                </div>
                <div class="glass-card rounded-2xl p-2 flex flex-col items-center min-w-[80px]">
                    <i :data-lucide="weatherIcon" class="w-5 h-5 text-orange-400"></i>
                    <div class="text-base font-black text-teal-900">{{ weather.temp }}Â°C</div>
                    <div class="text-[9px] text-blue-600 font-bold">é™é›¨ {{ weather.pop }}%</div>
                </div>
            </div>

            <div class="flex overflow-x-auto px-5 space-x-2 no-scrollbar pb-3">
                <button v-for="(info, index) in dateInfo" :key="index" @click="currentDay = index + 1"
                    :class="['flex-shrink-0 px-4 py-2 rounded-xl flex flex-col items-center min-w-[75px] transition-all border', 
                    currentDay === index + 1 ? 'active-tab shadow-md scale-105' : 'bg-white/40 text-slate-500 border-white/20']">
                    <span class="text-[9px] font-bold">{{ info.date }}</span>
                    <span class="text-sm font-black">Day {{ index + 1 }}</span>
                </button>
            </div>
        </header>

        <main class="px-4 mt-4">
            <div class="flex bg-white/30 backdrop-blur-md rounded-2xl p-1 mb-6 border border-white/40 shadow-inner">
                <button v-for="tab in [{id:'itinerary', n:'è¡Œç¨‹'}, {id:'split', n:'è¨˜å¸³'}, {id:'phrases', n:'æ—¥èª'}]" 
                        @click="activeTab = tab.id" 
                        :class="['flex-1 py-2 rounded-xl text-sm font-black transition-all', activeTab === tab.id ? 'active-tab shadow-md' : 'text-slate-600']">
                    {{ tab.n }}
                </button>
            </div>

            <div v-if="activeTab === 'itinerary'" class="relative">
                <div class="timeline-line"></div>
                <div v-for="(item, index) in itinerary[currentDay]" :key="index" class="mb-5 relative pl-9">
                    <div class="timeline-dot top-6"></div>
                    <div class="glass-card p-4 rounded-2xl relative">
                        <div class="flex justify-between items-start mb-2 gap-2">
                            <div class="flex flex-wrap gap-1.5 flex-1">
                                <input v-model="item.time" class="bg-teal-600 text-white text-[10px] px-2 py-0.5 rounded-lg font-bold w-24 text-center">
                                <div class="flex items-center text-[10px] text-teal-800 font-bold bg-white/70 px-2 py-0.5 rounded-lg border border-teal-100">
                                    <i data-lucide="clock" class="w-3 h-3 mr-1"></i>
                                    åœ <input v-model="item.stay" class="w-10 text-center font-black" placeholder="-">
                                </div>
                            </div>
                            <div class="flex gap-2">
                                <button @click="openGoogleMap(item.location)" class="map-btn shadow-sm">GO</button>
                                <button @click="deleteItem(index)" class="text-slate-400"><i data-lucide="trash-2" class="w-4 h-4"></i></button>
                            </div>
                        </div>
                        
                        <input v-model="item.location" class="text-lg font-black text-slate-900 mb-1 leading-tight" placeholder="æ™¯é»åç¨±">
                        
                        <div class="flex items-center gap-2 mb-2 bg-orange-50/50 p-1.5 rounded-lg border border-orange-100">
                            <span class="text-[9px] bg-orange-200 text-orange-800 px-1.5 py-0.5 rounded font-black">ğŸš— MAPCODE</span>
                            <input v-model="item.mapCode" class="text-xs font-bold text-orange-800" placeholder="é»æ“Šè¼¸å…¥ MapCode">
                        </div>

                        <textarea v-model="item.note" class="text-xs text-slate-600 leading-relaxed min-h-[40px]" placeholder="å‚™è¨»..." rows="2"></textarea>
                        
                        <div class="mt-2 pt-2 border-t border-dashed border-teal-200 flex items-center text-[10px] text-teal-700 font-bold">
                            <i data-lucide="car" class="w-3 h-3 mr-1.5"></i>
                            ä¸‹ä¸€ç«™è»Šç¨‹ï¼š<input v-model="item.drive" class="flex-1 font-black text-teal-900" placeholder="è¼¸å…¥æ™‚é–“ (å¦‚: 30åˆ†)">
                        </div>
                    </div>
                </div>
                <button @click="addItem" class="w-full py-4 border-2 border-dashed border-white/60 rounded-2xl text-white flex items-center justify-center bg-teal-800/20 mb-24 font-black">
                    + æ–°å¢è¡Œç¨‹é …ç›®
                </button>
            </div>

            <div v-if="activeTab === 'phrases'" class="space-y-4 pb-24">
                <div v-for="(p, idx) in phrases" :key="idx" class="glass-card p-6 rounded-3xl shadow-sm border-white/40 text-center">
                    <p class="text-xs text-teal-600 font-bold mb-2">â— {{ p.zh }}</p>
                    <p class="text-3xl font-black text-slate-900 leading-normal break-words whitespace-pre-line">{{ p.jp }}</p>
                </div>
            </div>

            <div v-if="activeTab === 'split'" class="space-y-4 pb-24">
                <div class="glass-card p-6 rounded-2xl bg-teal-800/80 text-white text-center">
                    <p class="text-teal-200 text-[10px] font-black uppercase tracking-wider">Total Expenses</p>
                    <h3 class="text-3xl font-black">Â¥ {{ totalExpenses.toLocaleString() }}</h3>
                </div>
                <div v-for="(bill, idx) in expenses" :key="idx" class="glass-card p-4 rounded-xl flex justify-between items-center">
                    <input v-model="bill.title" class="font-bold flex-1">
                    <div class="flex items-center">
                        <span class="mr-1 text-teal-700 font-bold">Â¥</span>
                        <input v-model.number="bill.amount" type="number" class="w-20 text-right font-black">
                        <button @click="expenses.splice(idx, 1)" class="ml-3 text-red-300"><i data-lucide="x-circle" class="w-5 h-5"></i></button>
                    </div>
                </div>
                <button @click="addExpense" class="w-full py-4 glass-card rounded-xl text-slate-600 font-bold text-sm">+ æ–°å¢æ”¯å‡º</button>
            </div>
        </main>

        <nav class="fixed bottom-6 left-1/2 -translate-x-1/2 w-[90%] max-w-[400px] h-16 glass-card rounded-full flex items-center justify-around px-4 shadow-2xl z-50 border-white/50 bg-white/80">
            <button @click="activeTab = 'itinerary'" :class="activeTab === 'itinerary' ? 'text-teal-600 scale-110' : 'text-slate-400'"><i data-lucide="calendar"></i></button>
            <button @click="activeTab = 'split'" :class="activeTab === 'split' ? 'text-teal-600 scale-110' : 'text-slate-400'"><i data-lucide="wallet"></i></button>
            <button @click="activeTab = 'phrases'" :class="activeTab === 'phrases' ? 'text-teal-600 scale-110' : 'text-slate-400'"><i data-lucide="languages"></i></button>
        </nav>
    </div>

    <script>
        const { createApp, ref, onMounted, computed, watch } = Vue;
        createApp({
            setup() {
                const currentDay = ref(1);
                const activeTab = ref('itinerary');
                const weather = ref({ temp: '--', pop: '--', code: 0 });

                const dateInfo = [{date:'1/4', week:'æ—¥'},{date:'1/5', week:'ä¸€'},{date:'1/6', week:'äºŒ'},{date:'1/7', week:'ä¸‰'},{date:'1/8', week:'å››'}];
                
                const defaultItinerary = {
                    1: [
                        { time: "06:00-07:00", location: "æ¡ƒåœ’æ©Ÿå ´ç¬¬ä¸€èˆªå»ˆ", stay: "1hr", drive: "2.5hr(èˆªç¨‹)", note: "è·Ÿæ«ƒå§èªªæ‡·å­•ï¼Œå¯èƒ½å¯ä»¥å„ªå…ˆç™»æ©Ÿ", mapCode: "" },
                        { time: "09:45-12:25", location: "é‚£éœ¸æ©Ÿå ´", note: "12:25 æŠµé”", mapCode: "33 123 325*54" },
                        { time: "15:00-16:00", location: "ç³»æ»¿é­šå¸‚å ´", stay: "1hr", drive: "1.5hr", note: "16:30 é™¸çºŒæ”¶æ”¤", mapCode: "232 484 077*14" },
                        { time: "17:30-", location: "LCH Resort (åŒ—éƒ¨é£¯åº—)", note: "ä¸€æ¨“æœ‰Lawson", mapCode: "206 411 325*73" }
                    ],
                    2: [
                        { time: "09:00-09:30", location: "è¨±ç”°ä¼‘æ¯ç«™", stay: "30m", drive: "40m", note: "è²·æ°´æ—é¤¨é–€ç¥¨", mapCode: "206 476 705*46" },
                        { time: "11:10-16:30", location: "ç¾éº—æµ·æ°´æ—é¤¨", stay: "5hr", drive: "50m", note: "æµ·è±šç§€ã€é¯¨é¯Šé¤å»³", mapCode: "553 075 592*40" },
                        { time: "18:00-19:20", location: "ç‡’è‚‰æœ¬éƒ¨ç‰§å ´ åè­·åº—", stay: "1.5hr", mapCode: "206 655 716*78" }
                    ],
                    3: [
                        { time: "09:10-11:30", location: "åè­·è‡ªç„¶å‹•æ¤ç‰©åœ’", stay: "2.5hr", drive: "40m", mapCode: "206 689 696*34" },
                        { time: "12:10-13:00", location: "è¬åº§æ¯›", stay: "50m", drive: "50m", mapCode: "206 282 881*56" },
                        { time: "13:50-18:00", location: "ç¾åœ‹æ‘", stay: "4hr", drive: "40m", note: "æ—¥è½ç¾æ™¯", mapCode: "33 525 442*36" }
                    ],
                    4: [
                        { time: "09:00-10:30", location: "æ³Šæ¸¯é­šå¸‚å ´", stay: "1.5hr", mapCode: "33 216 119*82" },
                        { time: "14:00-15:00", location: "è¥¿æ¾å±‹ è±å´åº—", stay: "1hr", mapCode: "232 543 400*35" },
                        { time: "16:40-19:00", location: "ç€¨é•·å³¶", stay: "2.5hr", mapCode: "33 002 486*08" }
                    ],
                    5: [
                        { time: "09:00-09:30", location: "é”ç£¨å¯º", stay: "30m", mapCode: "33 161 568*51" },
                        { time: "13:30-14:00", location: "é‚„è»Š", note: "å‰åŠ æ»¿æ²¹", mapCode: "232 569 111*52" },
                        { time: "16:55", location: "æ©Ÿå ´èµ·é£›", note: "Bye Bye Okinawa" }
                    ]
                };

                const defaultPhrases = [
                    { zh: "æˆ‘æœ‰æ‡·å­•", jp: "å¦Šå¨ ã—ã¦ã„ã¾ã™ã€‚\n(Ninshin shite imasu)" },
                    { zh: "æˆ‘è¦è¾¦ç†å…¥ä½", jp: "ãƒã‚§ãƒƒã‚¯ã‚¤ãƒ³ã‚’ãŠé¡˜ã„ã—ã¾ã™ã€‚" },
                    { zh: "æˆ‘è¦è¾¦ç†é€€æˆ¿", jp: "ãƒã‚§ãƒƒã‚¯ã‚¢ã‚¦ãƒˆã‚’ãŠé¡˜ã„ã—ã¾ã™ã€‚" },
                    { zh: "é€™å€‹å¤šå°‘éŒ¢ï¼Ÿ", jp: "ã“ã‚Œã¯ã„ãã‚‰ã§ã™ã‹ï¼Ÿ" },
                    { zh: "ä½ æœ‰é€™å€‹å—ï¼Ÿ", jp: "ã“ã‚Œã¯ã‚ã‚Šã¾ã™ã‹ï¼Ÿ" },
                    { zh: "é€™æ˜¯ä»€éº¼ï¼Ÿ", jp: "ã“ã‚Œã¯ä½•ã§ã™ã‹ï¼Ÿ" },
                    { zh: "æˆ‘ç”¨ç¾é‡‘æ”¯ä»˜", jp: "ç¾é‡‘ã§æ‰•ã„ã¾ã™ã€‚" },
                    { zh: "æˆ‘ç”¨ä¿¡ç”¨å¡æ”¯ä»˜", jp: "ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã‚«ãƒ¼ãƒ‰ã§æ‰•ã„ã¾ã™ã€‚" },
                    { zh: "è«‹çµ¦æˆ‘ä¸€æ¯æ°´", jp: "ãŠæ°´ã‚’ä¸€æ¯ãã ã•ã„ã€‚" },
                    { zh: "è«‹å•æœ‰å…è²»åœè»Šå—ï¼Ÿ", jp: "ç„¡æ–™é§è»Šå ´ã¯ã‚ã‚Šã¾ã™ã‹ï¼Ÿ" },
                    { zh: "è«‹ä¸è¦åŠ è”¥", jp: "ã­ãã‚’å…¥ã‚Œãªã„ã§ãã ã•ã„ã€‚" },
                    { zh: "è«‹å•å»æ‰€åœ¨å“ªè£¡ï¼Ÿ", jp: "ãŠæ‰‹æ´—ã„ã¯ã©ã“ã§ã™ã‹ï¼Ÿ" }
                ];

                const itinerary = ref(JSON.parse(localStorage.getItem('ok_itinerary_2026')) || defaultItinerary);
                const phrases = ref(defaultPhrases);
                const expenses = ref(JSON.parse(localStorage.getItem('ok_expenses_2026')) || []);

                const openGoogleMap = (loc) => {
                    const url = `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(loc + ' æ²–ç¸„')}`;
                    window.open(url, '_blank');
                };

                const addItem = () => { itinerary.value[currentDay.value].push({ time: "12:00", location: "æ–°æ™¯é»", stay: "", drive: "", note: "", mapCode: "" }); };
                const deleteItem = (idx) => { if(confirm("ç¢ºå®šåˆªé™¤ï¼Ÿ")) itinerary.value[currentDay.value].splice(idx, 1); };
                const addExpense = () => { expenses.value.push({ title: "é …ç›®", amount: 0 }); };

                watch([itinerary, expenses], () => {
                    localStorage.setItem('ok_itinerary_2026', JSON.stringify(itinerary.value));
                    localStorage.setItem('ok_expenses_2026', JSON.stringify(expenses.value));
                }, { deep: true });

                const totalExpenses = computed(() => expenses.value.reduce((sum, item) => sum + (item.amount || 0), 0));
                const weatherIcon = computed(() => weather.value.code <= 3 ? 'sun' : 'cloud-rain');

                onMounted(async () => {
                    try {
                        const res = await fetch('https://api.open-meteo.com/v1/forecast?latitude=26.2124&longitude=127.6809&current_weather=true&hourly=precipitation_probability');
                        const data = await res.json();
                        weather.value = { temp: Math.round(data.current_weather.temperature), pop: data.hourly.precipitation_probability[0], code: data.current_weather.weathercode };
                    } catch (e) { weather.value = { temp: 24, pop: 10, code: 0 }; }
                    lucide.createIcons();
                });

                watch([activeTab, currentDay], () => setTimeout(() => lucide.createIcons(), 50));
                return { currentDay, activeTab, itinerary, weather, weatherIcon, dateInfo, expenses, totalExpenses, phrases, addItem, deleteItem, addExpense, openGoogleMap };
            }
        }).mount('#app');
    </script>
</body>
</html>