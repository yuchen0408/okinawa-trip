<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Okinawa 2026 Ê≤ñÁπ©Â∫¶ÂÅáË∂£</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        body { 
            font-family: 'Noto Sans JP', sans-serif; 
            background-image: url('https://images.unsplash.com/photo-1544253049-3543666f286b?q=80&w=2000&auto=format&fit=crop'); 
            background-size: cover; 
            background-position: center; 
            background-attachment: fixed;
        }
        .main-overlay { 
            background: rgba(255, 255, 255, 0.05); 
            backdrop-filter: blur(8px); 
            min-height: 100vh; 
        }
        .glass-card { 
            background: rgba(255, 255, 255, 0.7); 
            backdrop-filter: blur(12px); 
            border: 1px solid rgba(255, 255, 255, 0.3); 
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        }
        .sticky-header { 
            position: sticky; 
            top: 0; 
            z-index: 40; 
            background: rgba(255, 255, 255, 0.5); 
            backdrop-filter: blur(20px); 
        }
        .timeline-line { position: absolute; left: 20px; top: 0; bottom: 0; width: 2px; border-left: 2px dashed #0d9488; z-index: 0; opacity: 0.5; }
        .timeline-dot { position: absolute; left: 14px; width: 14px; height: 14px; background: #0d9488; border: 3px solid white; border-radius: 50%; z-index: 10; }
        input, textarea { background: transparent; border: none; outline: none; width: 100%; }
        .active-tab { background-color: #0d9488 !important; color: white !important; }
        .map-btn { background: #4285F4; color: white; border-radius: 12px; padding: 6px 10px; font-size: 10px; display: flex; align-items: center; gap: 4px; }
    </style>
</head>
<body class="text-slate-800">
    <div id="app" class="main-overlay pb-32">
        <header class="sticky-header shadow-sm">
            <div class="p-6 pb-2 flex justify-between items-start">
                <div>
                    <h1 class="text-2xl font-black text-teal-900 drop-shadow-md">Ê≤ñÁπ© 2026 üå¥</h1>
                    <p class="text-slate-800 font-bold text-xs bg-white/60 inline-block px-3 py-1 rounded-full mt-1">OKINAWA VACATION</p>
                </div>
                <div class="glass-card rounded-3xl p-3 flex flex-col items-center min-w-[90px] border-white/50">
                    <i :data-lucide="weatherIcon" class="w-6 h-6 text-orange-400 mb-1"></i>
                    <div class="text-lg font-black text-teal-900">{{ weather.temp }}¬∞C</div>
                    <div class="text-[10px] text-blue-600 font-bold">ÈôçÈõ® {{ weather.pop }}%</div>
                </div>
            </div>

            <div class="flex overflow-x-auto px-6 space-x-3 no-scrollbar pb-4 pt-4">
                <button v-for="(info, index) in dateInfo" :key="index" @click="currentDay = index + 1"
                    :class="['flex-shrink-0 px-4 py-3 rounded-2xl flex flex-col items-center min-w-[85px] transition-all border', 
                    currentDay === index + 1 ? 'active-tab scale-105 shadow-lg' : 'bg-white/50 text-slate-500 border-white/30']">
                    <span class="text-[10px] font-bold">{{ info.date }}</span>
                    <span class="text-sm font-black">Day {{ index + 1 }}</span>
                </button>
            </div>
        </header>

        <main class="px-5 mt-4">
            <div class="flex bg-white/30 backdrop-blur-md rounded-2xl p-1 mb-6 border border-white/40">
                <button @click="activeTab = 'itinerary'" :class="['flex-1 py-2.5 rounded-xl text-sm font-black transition-all', activeTab === 'itinerary' ? 'active-tab shadow-md' : 'text-slate-700']">Ë°åÁ®ã</button>
                <button @click="activeTab = 'split'" :class="['flex-1 py-2.5 rounded-xl text-sm font-black transition-all', activeTab === 'split' ? 'active-tab shadow-md' : 'text-slate-700']">Ë®òÂ∏≥</button>
                <button @click="activeTab = 'phrases'" :class="['flex-1 py-2.5 rounded-xl text-sm font-black transition-all', activeTab === 'phrases' ? 'active-tab shadow-md' : 'text-slate-700']">Â∏∏Áî®Êó•Ë™û</button>
            </div>

            <div v-if="activeTab === 'itinerary'" class="relative">
                <div class="timeline-line"></div>
                <div v-for="(item, index) in itinerary[currentDay]" :key="index" class="mb-6 relative pl-10">
                    <div class="timeline-dot top-6"></div>
                    <div class="glass-card p-5 rounded-3xl relative">
                        <div class="flex justify-between items-start mb-2">
                            <div class="flex flex-wrap gap-2">
                                <input v-model="item.time" class="bg-teal-600 text-white text-[11px] px-3 py-1 rounded-full font-bold w-28 text-center shadow-sm">
                                <div v-if="item.stay" class="flex items-center text-[10px] text-teal-800 font-bold bg-white/60 px-2 rounded-full border border-teal-200">
                                    <i data-lucide="clock" class="w-3 h-3 mr-1"></i>
                                    ÂÅú <input v-model="item.stay" class="w-12 text-center font-black">
                                </div>
                            </div>
                            <div class="flex gap-2">
                                <button @click="openGoogleMap(item.location)" class="map-btn shadow-sm">
                                    <i data-lucide="navigation" class="w-3 h-3"></i>GO
                                </button>
                                <button @click="deleteItem(index)" class="text-red-400 p-1"><i data-lucide="trash-2" class="w-4 h-4"></i></button>
                            </div>
                        </div>
                        
                        <input v-model="item.location" class="text-lg font-black text-slate-900 mb-1 leading-tight" placeholder="Ë°åÁ®ãÂêçÁ®±">
                        
                        <div class="flex items-center gap-2 mb-2">
                            <span class="text-[10px] bg-orange-100 text-orange-700 px-2 py-0.5 rounded font-bold">üöó MapCode</span>
                            <input v-model="item.mapCode" class="text-xs font-bold text-orange-700" placeholder="MapCode">
                        </div>

                        <textarea v-model="item.note" class="text-xs text-slate-700 leading-relaxed h-auto min-h-[40px] mt-1" placeholder="ÂÇôË®ª..." rows="3"></textarea>
                        
                        <div v-if="item.drive" class="mt-3 pt-2 border-t border-dashed border-teal-300 flex items-center text-[10px] text-teal-700 font-bold italic">
                            <i data-lucide="car" class="w-3 h-3 mr-1"></i>
                            ËªäÁ®ãÔºö<input v-model="item.drive" class="w-24 font-black">
                        </div>
                    </div>
                </div>
                <button @click="addItem" class="w-full py-4 border-2 border-dashed border-white/50 rounded-3xl text-white flex items-center justify-center bg-teal-800/30 mb-20 font-black shadow-lg">
                    + Êñ∞Â¢ûË°åÁ®ã
                </button>
            </div>

            <div v-if="activeTab === 'phrases'" class="space-y-4 pb-20">
                <div v-for="(p, idx) in phrases" :key="idx" class="glass-card p-6 rounded-3xl shadow-sm border-white/40">
                    <p class="text-xs text-teal-700 font-bold mb-2">‚óè {{ p.zh }}</p>
                    <p class="text-3xl font-black text-slate-900 leading-snug break-words whitespace-pre-line">{{ p.jp }}</p>
                </div>
            </div>

            <div v-if="activeTab === 'split'" class="space-y-4">
                <div class="glass-card p-6 rounded-3xl bg-teal-800/80 text-white shadow-lg border-none text-center">
                    <p class="text-teal-200 text-xs font-black mb-1">Á∏ΩË®àÊîØÂá∫</p>
                    <h3 class="text-3xl font-black">¬• {{ totalExpenses.toLocaleString() }}</h3>
                </div>
                <div v-for="(bill, idx) in expenses" :key="idx" class="glass-card p-4 rounded-2xl flex justify-between items-center">
                    <input v-model="bill.title" class="font-bold">
                    <div class="flex items-center">
                        <span class="mr-1">¬•</span><input v-model.number="bill.amount" type="number" class="w-20 text-right font-black">
                        <button @click="expenses.splice(idx, 1)" class="ml-4 text-red-400"><i data-lucide="x-circle" class="w-5 h-5"></i></button>
                    </div>
                </div>
                <button @click="addExpense" class="w-full py-4 glass-card rounded-2xl text-slate-600 font-bold">+ Êñ∞Â¢ûÊîØÂá∫</button>
            </div>
        </main>

        <nav class="fixed bottom-6 left-1/2 -translate-x-1/2 w-[90%] max-w-[420px] h-16 glass-card rounded-full flex items-center justify-around px-6 shadow-2xl z-50 border-white/60 bg-white/80">
            <button @click="activeTab = 'itinerary'" :class="activeTab === 'itinerary' ? 'text-teal-600 scale-125' : 'text-slate-500'"><i data-lucide="calendar"></i></button>
            <button @click="activeTab = 'split'" :class="activeTab === 'split' ? 'text-teal-600 scale-125' : 'text-slate-500'"><i data-lucide="wallet"></i></button>
            <button @click="activeTab = 'phrases'" :class="activeTab === 'phrases' ? 'text-teal-600 scale-125' : 'text-slate-500'"><i data-lucide="languages"></i></button>
        </nav>
    </div>

    <script>
        const { createApp, ref, onMounted, computed, watch } = Vue;
        createApp({
            setup() {
                const currentDay = ref(1);
                const activeTab = ref('itinerary');
                const weather = ref({ temp: '--', pop: '--', code: 0 });
                const exchangeRate = ref(0.215);

                const dateInfo = [{date:'1/4', week:'Êó•'},{date:'1/5', week:'‰∏Ä'},{date:'1/6', week:'‰∫å'},{date:'1/7', week:'‰∏â'},{date:'1/8', week:'Âõõ'}];
                
                // ÂÆåÊï¥Ë°åÁ®ãÈ†êË®≠ÂÄº
                const defaultItinerary = {
                    1: [
                        { time: "06:00-07:00", location: "Ê°ÉÂúíÊ©üÂ†¥Á¨¨‰∏ÄËà™Âªà", stay: "1Â∞èÊôÇ", drive: "2.5hr(Ëà™Á®ã)", note: "Ë∑üÊ´ÉÂßêË™™Êá∑Â≠ïÔºåÂèØËÉΩÂèØ‰ª•ÂÑ™ÂÖàÁôªÊ©ü", mapCode: "" },
                        { time: "09:45-12:25", location: "ÈÇ£Èú∏Ê©üÂ†¥", note: "12:25 ÊäµÈÅî", mapCode: "33 123 325*54" },
                        { time: "14:00-14:30", location: "OTS Ëá®Á©∫Ë±êÂ¥éÁáüÊ•≠ÊâÄ", note: "ÂèñËªäËá™ÈßïÈñãÂßã", mapCode: "232 569 111*52" },
                        { time: "15:00-16:00", location: "Á≥ªÊªøÈ≠öÂ∏ÇÂ†¥", stay: "1 Â∞èÊôÇ", drive: "1.5 Â∞èÊôÇ", note: "16:30 ÂæåÈÉ®ÂàÜÊî§‰ΩçÊî∂", mapCode: "232 484 077*14" },
                        { time: "17:30-", location: "LCH Resort (ÂåóÈÉ®È£ØÂ∫ó)", note: "‰∏ÄÊ®ìÊúâLawson", mapCode: "206 411 325*73" }
                    ],
                    2: [
                        { time: "09:00-09:30", location: "Ë®±Áî∞‰ºëÊÅØÁ´ô", stay: "30 ÂàÜ", drive: "40 ÂàÜ", note: "Ë≤∑Ê∞¥ÊóèÈ§®ÈñÄÁ•®(ÁèæÈáë2000ÂÜÜ)", mapCode: "206 476 705*46" },
                        { time: "10:10-10:40", location: "Âè§ÂÆáÂà©ÂçóÁ´ØÂ±ïÊúõÂè∞", stay: "30 ÂàÜ", drive: "30 ÂàÜ", note: "ÁúãÊµ∑Ê≤ôÁÅò", mapCode: "485 601 892*07" },
                        { time: "11:10-16:30", location: "Ê≤ñÁπ©ÁæéÈ∫óÊµ∑Ê∞¥ÊóèÈ§®", stay: "5 Â∞èÊôÇ", drive: "50 ÂàÜ", note: "ÊéíÈØ®ÈØäÈ§êÂª≥", mapCode: "553 075 592*40" },
                        { time: "18:00-19:20", location: "ÁáíËÇâÊú¨ÈÉ®ÁâßÂ†¥ ÂêçË≠∑Â∫ó", stay: "1 Â∞èÊôÇ 20", mapCode: "206 655 716*78" }
                    ],
                    3: [
                        { time: "09:10-11:30", location: "ÂêçË≠∑Ëá™ÁÑ∂ÂãïÊ§çÁâ©Âúí", stay: "2.5 Â∞èÊôÇ", drive: "40 ÂàÜ", mapCode: "206 689 696*34" },
                        { time: "12:10-13:00", location: "Ëê¨Â∫ßÊØõ", stay: "50 ÂàÜ", drive: "50 ÂàÜ", mapCode: "206 282 881*56" },
                        { time: "13:50-18:00", location: "ÁæéÂúãÊùë", stay: "4 Â∞èÊôÇ", drive: "40 ÂàÜ", mapCode: "33 525 442*36" }
                    ],
                    4: [
                        { time: "09:00-10:30", location: "Ê≥äÊ∏ØÈ≠öÂ∏ÇÂ†¥", stay: "1.5 Â∞èÊôÇ", mapCode: "33 216 119*82" },
                        { time: "10:30-12:00", location: "ÂúãÈöõÈÄöÔºãÁâßÂøóÂ∏ÇÂ†¥", stay: "1.5 Â∞èÊôÇ", mapCode: "33 157 410*00" },
                        { time: "14:00-15:00", location: "Ë•øÊùæÂ±ã Ë±êÂ¥éÂ∫ó", stay: "1 Â∞èÊôÇ", note: "iiasË≥ºÁâ©‰∏≠ÂøÉË£°", mapCode: "232 543 400*35" },
                        { time: "16:40-19:00", location: "ÁÄ®Èï∑Â≥∂", stay: "2.5 Â∞èÊôÇ", mapCode: "33 002 486*08" }
                    ],
                    5: [
                        { time: "09:00-09:30", location: "ÈÅîÁ£®ÂØ∫", stay: "30 ÂàÜ", mapCode: "33 161 568*51" },
                        { time: "13:30-14:00", location: "ÈÇÑËªä", note: "ÂâçÂä†ÊªøÊ≤π", mapCode: "232 569 111*52" },
                        { time: "16:55", location: "Ê©üÂ†¥Ëµ∑È£õ", note: "Bye Bye Okinawa" }
                    ]
                };

                // Â∏∏Áî®Êó•ÊñáÂ∞çË©± (ÂåÖÂê´‰Ω†Êñ∞Â¢ûÁöÑÊâÄÊúâÈúÄÊ±Ç)
                const defaultPhrases = [
                    { zh: "ÊàëÊúâÊá∑Â≠ï", jp: "Â¶äÂ®†„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ\n(Ninshin shite imasu)" },
                    { zh: "ÊàëË¶ÅËæ¶ÁêÜÂÖ•‰Ωè", jp: "„ÉÅ„Çß„ÉÉ„ÇØ„Ç§„É≥„Çí„ÅäÈ°ò„ÅÑ„Åó„Åæ„Åô„ÄÇ\n(Chekku-in o onegaishimasu)" },
                    { zh: "ÊàëË¶ÅËæ¶ÁêÜÈÄÄÊàø", jp: "„ÉÅ„Çß„ÉÉ„ÇØ„Ç¢„Ç¶„Éà„Çí„ÅäÈ°ò„ÅÑ„Åó„Åæ„Åô„ÄÇ\n(Chekku-auto o onegaishimasu)" },
                    { zh: "ÈÄôÂÄãÂ§öÂ∞ëÈå¢Ôºü", jp: "„Åì„Çå„ÅØ„ÅÑ„Åè„Çâ„Åß„Åô„ÅãÔºü\n(Kore wa ikura desu ka?)" },
                    { zh: "‰Ω†ÊúâÈÄôÂÄãÂóéÔºü", jp: "„Åì„Çå„ÅØ„ÅÇ„Çä„Åæ„Åô„ÅãÔºü\n(Kore wa arimasu ka?)" },
                    { zh: "ÈÄôÊòØ‰ªÄÈ∫ºÔºü", jp: "„Åì„Çå„ÅØ‰Ωï„Åß„Åô„ÅãÔºü\n(Kore wa nan desu ka?)" },
                    { zh: "ÊàëÁî®ÁèæÈáëÊîØ‰ªò", jp: "ÁèæÈáë„ÅßÊâï„ÅÑ„Åæ„Åô„ÄÇ\n(Genkin de haraimasu)" },
                    { zh: "ÊàëÁî®‰ø°Áî®Âç°ÊîØ‰ªò", jp: "„ÇØ„É¨„Ç∏„ÉÉ„Éà„Ç´„Éº„Éâ„ÅßÊâï„ÅÑ„Åæ„Åô„ÄÇ\n(Kurejitto ka-do de haraimasu)" },
                    { zh: "Ë´ãÁµ¶Êàë‰∏ÄÊùØÊ∞¥", jp: "„ÅäÊ∞¥„Çí‰∏ÄÊùØ„Åè„Å†„Åï„ÅÑ„ÄÇ\n(Omizu o ippai kudasai)" },
                    { zh: "Ë´ãÂïèÊúâÂÖçË≤ªÂÅúËªäÂóéÔºü", jp: "ÁÑ°ÊñôÈßêËªäÂ†¥„ÅØ„ÅÇ„Çä„Åæ„Åô„ÅãÔºü\n(Mury≈ç ch≈´shaj≈ç wa arimasu ka?)" },
                    { zh: "‰∏çÁî®Ë¢ãÂ≠ê", jp: "Ë¢ã„ÅØ„ÅÑ„Çä„Åæ„Åõ„Çì„ÄÇ\n(Fukuro wa irimasen)" },
                    { zh: "Ë´ã‰∏çË¶ÅÂä†Ëî•", jp: "„Å≠„Åé„ÇíÂÖ•„Çå„Å™„ÅÑ„Åß„Åè„Å†„Åï„ÅÑ„ÄÇ\n(Negi o irenaide kudasai)" },
                    { zh: "Ë´ãÂïèÂªÅÊâÄÂú®Âì™Ë£°Ôºü", jp: "„ÅäÊâãÊ¥ó„ÅÑ„ÅØ„Å©„Åì„Åß„Åô„ÅãÔºü\n(Otearai wa doko desu ka?)" }
                ];

                const itinerary = ref(JSON.parse(localStorage.getItem('ok_itinerary_2026')) || defaultItinerary);
                const phrases = ref(defaultPhrases); // ÊØèÊ¨°Êõ¥Êñ∞ÊôÇÈáçÊñ∞ÂåØÂÖ•ÊúÄÂÖ®ÁöÑÁâàÊú¨
                const expenses = ref(JSON.parse(localStorage.getItem('ok_expenses_2026')) || []);

                const openGoogleMap = (loc) => {
                    const url = `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(loc + ' Ê≤ñÁ∏Ñ')}`;
                    window.open(url, '_blank');
                };

                const addItem = () => { itinerary.value[currentDay.value].push({ time: "12:00", location: "Êñ∞Èªû", stay: "", drive: "", note: "", mapCode: "" }); };
                const deleteItem = (idx) => { if(confirm("Á¢∫ÂÆöÂà™Èô§Ôºü")) itinerary.value[currentDay.value].splice(idx, 1); };
                const addExpense = () => { expenses.value.push({ title: "Êñ∞ÊîØÂá∫", amount: 0 }); };

                watch([itinerary, expenses], () => {
                    localStorage.setItem('ok_itinerary_2026', JSON.stringify(itinerary.value));
                    localStorage.setItem('ok_expenses_2026', JSON.stringify(expenses.value));
                }, { deep: true });

                const totalExpenses = computed(() => expenses.value.reduce((sum, item) => sum + (item.amount || 0), 0));
                const weatherIcon = computed(() => weather.value.code <= 3 ? 'sun' : 'cloud-rain');

                onMounted(async () => {
                    try {
                        const res = await fetch('https://api.open-meteo.com/v1/forecast?latitude=26.2124&longitude=127.6809&current_weather=true&hourly=precipitation_probability');
                        const data = await res.json();
                        weather.value = { temp: Math.round(data.current_weather.temperature), pop: data.hourly.precipitation_probability[0], code: data.current_weather.weathercode };
                    } catch (e) { weather.value = { temp: 24, pop: 10, code: 0 }; }
                    lucide.createIcons();
                });

                watch([activeTab, currentDay], () => setTimeout(() => lucide.createIcons(), 50));
                return { currentDay, activeTab, itinerary, weather, weatherIcon, dateInfo, expenses, totalExpenses, exchangeRate, phrases, addItem, deleteItem, addExpense, openGoogleMap };
            }
        }).mount('#app');
    </script>
</body>
</html>